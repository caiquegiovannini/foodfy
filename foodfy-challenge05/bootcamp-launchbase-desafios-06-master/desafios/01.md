# üì∑ Sistema de Envio de Imagem

Voc√™ ir√° criar um sistema de envio de imagem, conforme as especifica√ß√µes abaixo.

Veja tamb√©m as especifica√ß√µes do layout, abrindo o arquivo que est√° em [layouts/index.html](../layouts/index.html) no seu navegador Google Chrome. 

**Download dos arquivos:** https://github.com/Rocketseat/bootcamp-launchbase-desafios-06/archive/master.zip

## 1. Tabelas

Crie uma tabela de nome `files` com os campos

- `id SERIAL PRIMARY KEY`
- `name TEXT`
- `path TEXT NOT NULL`

Essa tabela acima ir√° receber todas as imagens do sistema.

Crie uma tabela de nome `recipe_files` com os campos

- `id SERIAL PRIMARY KEY`
- `recipe_id INTEGER REFERENCES recipes(id)`
- `file_id INTEGER REFERENCES files(id)`

Voc√™ vai precisar buscar as imagens de uma receita, criando um 
relacionamento entre as tabelas `recipe_files` com a tabela `files`

## 2. Receitas

Adicionar imagens √†s receitas.

- No banco de dados, remova o campo `image`, pois n√£o ser√° mais necess√°rio.
- Crie um campo de upload de imagens
- Coloque um limite de 5 imagens
- A receita deve ter pelo menos uma imagem

**Cria√ß√£o de uma receita**
![Imagem da P√°gina de Cria√ß√£o de Receitas](../layouts/preview/desafio-06-receita-cria√ß√£o.png)

**Edi√ß√£o de uma receitas**
![Imagem P√°gina de Edi√ß√£o de Receitas](../layouts/preview/desafio-06-receita-edi√ß√£o.png)

## 3. Chefs

Adicionar a imagem de avatar para o chef

- Remova o campo `avatar_url` da tabela de chefs
- Adicione o campo `file_id INTEGER REFERENCES files(id)`

Voc√™ vai precisar criar um relacionamento entre `chefs` e `files`

Dica: Use `ALTER TABLE` para fazer as altera√ß√µes da tabela de chefs.

**Cria√ß√£o de um chef**
![Imagem da P√°gina de Cria√ß√£o de Chef](../layouts/preview/desafio-06-chef-cria√ß√£o.png)

**Edi√ß√£o de um chef**
![Imagem P√°gina de Edi√ß√£o de Chef](../layouts/preview/desafio-06-chef-edi√ß√£o.png)

## 4. Apresenta√ß√£o

Mostrar as novas imagens de receitas e chefs que estar√£o cadastradas no banco de dados.

Na p√°gina de detalhe de uma receita, criar uma funcionalidade de troca de imagens conforme imagem abaixo.
![Imagem da P√°gina de Detalhes de uma Receita](../layouts/preview/desafio-06-receita-detalhe.png)

**N√£o haver√° altera√ß√µes** visuais para os chefs.

# üìù Apresenta√ß√£o e Organiza√ß√£o das Receitas.

## 1. Order by

A apresenta√ß√£o das receitas para os clientes, tanto a p√°gina de listagem receitas, como a se√ß√£o de receitas dos chefs, dever√° ser **ordenada** por **√∫ltimas cadastradas**.

DICA: Use o campo `created_at` para fazer essa ordena√ß√£o

A **p√°gina de busca** dever√° ser ordenada por **√∫ltimas receitas atualizadas**.

DICA: Use o campo `updated_at` para fazer essa ordena√ß√£o

**Lembre** de criar `Triggers` e `Procedures` para auto atualizar o campo `updated_at` no banco de dados, sempre que um conte√∫do for atualizado.

# üíà Novos conceitos

Aplique os conceitos de `async/await` e de `try/catch` que voc√™ aprendeu nas aulas.
